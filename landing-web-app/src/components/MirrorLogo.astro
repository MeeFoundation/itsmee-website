<article class="mirror-logo my-4 flex h-16 items-baseline lg:hidden">
  <img
    src="./images/logo-m.svg"
    width="91"
    height="64"
    class="flex flex-shrink-0"
  />
  <img
    src="./images/logo-e.svg"
    width="64"
    height="64"
    class="flex flex-shrink-0"
  />
  <img
    src="./images/logo-e.svg"
    width="64"
    id="mirror-logo-e"
    height="64"
    class="flex flex-shrink-0"
  />
</article>

<style>
  #mirror-logo-e {
    transform: translateX(-100%) scaleX(1);
  }
  .anim {
    animation: splitAndMirror 2000ms linear 700ms both;
  }
  @keyframes splitAndMirror {
    20% {
      transform: translateX(0%);
    }
    80% {
      transform: scaleX(1);
    }
    100% {
      transform: scaleX(-1);
    }
  }
</style>

<script>
  const mirrorE = document.getElementById("mirror-logo-e");
  const mirrorLogo = document.querySelector(".mirror-logo");
  let startAnimation = false;

  const observerMirrorLogo = new IntersectionObserver(
    (entries, _) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          if (!startAnimation) {
            mirrorE?.classList.add("anim");
            startAnimation = true;
          }
        } else {
          mirrorE?.classList.remove("anim");
          startAnimation = false;
        }
      });
    },
    { threshold: 1 }
  );

  if (mirrorLogo) observerMirrorLogo.observe(mirrorLogo);
</script>
